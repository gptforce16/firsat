<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Yakın Fırsatlar - Haritalı</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css"/>
  <style>
    /* Kendi stilinizi burada koruyabilirsiniz */
  </style>
</head>
<body>
  <header>Yakın Fırsatlar</header>
  <div id="map"></div>

  <div class="filters">
    <button onclick="filterCards('all')" class="active">Tümü</button>
    <button onclick="filterCards('Kuaför')">Kuaför</button>
    <button onclick="filterCards('Tatlı')">Tatlı</button>
    <button onclick="filterCards('Spor')">Spor</button>
  </div>

  <div class="container" id="cardContainer">
    <div class="card" data-category="Kuaför" data-lat="40.989" data-lng="29.032">
      <div class="title">Kuaför Ayşe</div>
      <div class="desc">Saat 14:00-15:00 arası kaş alım %50 indirimli!</div>
      <div class="time">Kadıköy - Son 43 dakika kaldı</div>
      <div class="tag">Kuaför</div><br>
      <a href="#" class="btn">Hemen Git</a>

      <!-- Yorumlar ve Puanlar -->
      <div class="reviews">
        <h3>Yorumlar</h3>
        <div class="review">
          <div class="review-text">Hizmet harikaydı!</div>
          <div class="review-rating">Puan: 5</div>
        </div>
        <div class="review">
          <div class="review-text">Fiyat biraz yüksek ama indirim güzel.</div>
          <div class="review-rating">Puan: 4</div>
        </div>
        <h4>Yorum Yap:</h4>
        <form onsubmit="submitReview(event, 'Kuaför Ayşe')">
          <textarea id="review-text" placeholder="Yorumunuzu yazın..." required></textarea><br>
          <label for="review-rating">Puan: </label>
          <select id="review-rating" required>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
          </select><br>
          <button type="submit">Yorum Gönder</button>
        </form>
      </div>
    </div>
  </div>

  <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>
  <script>
    const map = L.map('map').setView([40.986, 29.055], 13);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; OpenStreetMap'
    }).addTo(map);

    // Kullanıcı yorumları ve puanları
    const reviews = {
      "Kuaför Ayşe": [
        { text: "Hizmet harikaydı!", rating: 5 },
        { text: "Fiyat biraz yüksek ama indirim güzel.", rating: 4 }
      ]
    };

    // Yorum ve puan ekleme işlevi
    function submitReview(event, place) {
      event.preventDefault();
      const reviewText = document.getElementById("review-text").value;
      const reviewRating = parseInt(document.getElementById("review-rating").value);

      if (reviews[place]) {
        reviews[place].push({ text: reviewText, rating: reviewRating });
      } else {
        reviews[place] = [{ text: reviewText, rating: reviewRating }];
      }

      renderReviews(place);
    }

    // Yorumları render etme
    function renderReviews(place) {
      const reviewContainer = document.querySelector(`[data-category="${place}"] .reviews`);
      const reviewList = reviews[place].map(review => `
        <div class="review">
          <div class="review-text">${review.text}</div>
          <div class="review-rating">Puan: ${review.rating}</div>
        </div>
      `).join('');
      
      reviewContainer.innerHTML = `
        <h3>Yorumlar</h3>
        ${reviewList}
        <h4>Yorum Yap:</h4>
        <form onsubmit="submitReview(event, '${place}')">
          <textarea id="review-text" placeholder="Yorumunuzu yazın..." required></textarea><br>
          <label for="review-rating">Puan: </label>
          <select id="review-rating" required>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
          </select><br>
          <button type="submit">Yorum Gönder</button>
        </form>
      `;
    }

    // Başlangıçta yorumları render et
    renderReviews("Kuaför Ayşe");

    // Diğer fonksiyonlar ve harita ayarları burada
  </script>
</body>
</html>