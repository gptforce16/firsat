<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gerçekçi SVG Hediye Çarkı</title>
  <style>
    body {
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      height: 100vh;
      background: #f4f4f4;
    }
    #wheel {
      width: 500px;
      height: 500px;
      transform-origin: 50% 50%;
      transition: transform 5s cubic-bezier(0.17, 0.67, 0.83, 0.67);
    }
    #pointer {
      position: absolute;
      top: calc(50% - 280px);
      left: 50%;
      transform: translateX(-50%);
      z-index: 10;
      filter: drop-shadow(0 2px 4px rgba(0,0,0,0.4));
    }
    #spinBtn {
      margin-top: 30px;
      padding: 12px 24px;
      font-size: 18px;
      border: none;
      border-radius: 10px;
      background: linear-gradient(145deg, #f39c12, #e67e22);
      color: white;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 4px 8px rgba(0,0,0,0.3);
      transition: transform 0.2s;
    }
    #spinBtn:hover {
      transform: scale(1.05);
    }
  </style>
</head>
<body>

<svg id="pointer" width="50" height="50" viewBox="-25 -25 50 50">
  <!-- Sivri ucu aşağıya bakan altın sarısı üçgen -->
  <polygon points="0,-22 18,20 -18,20" 
           fill="gold" 
           stroke="#b8860b" 
           stroke-width="3" />
</svg>

<svg id="wheel" viewBox="0 0 500 500"></svg>

<button id="spinBtn">Çevir</button>

<script>
const wheel = document.getElementById("wheel");
const spinBtn = document.getElementById("spinBtn");

const PRIZES = [
  { label: "%10 İndirim", color: "#f1c40f", weight: 1 },
  { label: "Bedava Kahve", color: "#e67e22", weight: 1 },
  { label: "%20 İndirim", color: "#1abc9c", weight: 1 },
  { label: "Tatlı Hediye", color: "#3498db", weight: 1 },
  { label: "Üzgünüm :(", color: "#9b59b6", weight: 1 },
  { label: "%50 İndirim", color: "#e74c3c", weight: 1 },
];

const sliceAngle = 360 / PRIZES.length;

// Çarkı çiz
PRIZES.forEach((prize, i) => {
  let startAngle = (i * sliceAngle) * Math.PI / 180;
  let endAngle = ((i + 1) * sliceAngle) * Math.PI / 180;

  let x1 = 250 + 250 * Math.cos(startAngle);
  let y1 = 250 + 250 * Math.sin(startAngle);
  let x2 = 250 + 250 * Math.cos(endAngle);
  let y2 = 250 + 250 * Math.sin(endAngle);

  let pathData = `M250,250 L${x1},${y1} A250,250 0 0,1 ${x2},${y2} Z`;

  let path = document.createElementNS("http://www.w3.org/2000/svg", "path");
  path.setAttribute("d", pathData);
  path.setAttribute("fill", prize.color);
  path.setAttribute("stroke", "#fff");
  path.setAttribute("stroke-width", "2");
  wheel.appendChild(path);

  // Etiket
  let textAngle = (i + 0.5) * sliceAngle * Math.PI / 180;
  let tx = 250 + 150 * Math.cos(textAngle);
  let ty = 250 + 150 * Math.sin(textAngle);

  let text = document.createElementNS("http://www.w3.org/2000/svg", "text");
  text.setAttribute("x", tx);
  text.setAttribute("y", ty);
  text.setAttribute("fill", "#000");
  text.setAttribute("font-size", "16");
  text.setAttribute("text-anchor", "middle");
  text.setAttribute("alignment-baseline", "middle");
  text.setAttribute("transform", `rotate(${(i + 0.5) * sliceAngle}, ${tx}, ${ty})`);
  text.textContent = prize.label;
  wheel.appendChild(text);
});

let currentRotation = 0;

spinBtn.addEventListener("click", () => {
  let extraSpins = 5 * 360; // 5 tur
  let randomAngle = Math.floor(Math.random() * 360);
  let targetRotation = currentRotation + extraSpins + randomAngle;

  wheel.style.transition = "transform 5s cubic-bezier(0.17, 0.67, 0.83, 0.67)";
  wheel.style.transform = `rotate(${targetRotation}deg)`;

  setTimeout(() => {
    currentRotation = targetRotation % 360;

    let adjustedAngle = (360 - currentRotation) % 360;
    let winningIndex = Math.floor(adjustedAngle / sliceAngle);
    alert("Kazandın: " + PRIZES[winningIndex].label);
  }, 5200);
});
</script>

</body>
</html>